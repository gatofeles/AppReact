{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'../static/css/addMaterias.css';import axios from'axios';import Joi from'joi';//TODO: Verificar duplicidade de usuários e e-mails no front.\nvar Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:{userName:'',email:'',password:''}};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var blankUser,valid,backEndPoint,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:blankUser={userName:'',email:'',password:''};e.preventDefault();valid=_this.validateUser(_this.state.user);if(!valid.error){_context.next=8;break;}alert(valid.error.message);_this.setState({user:blankUser});_context.next=23;break;case 8:_context.prev=8;backEndPoint=process.env.REACT_APP_API_URL;_context.next=12;return axios.post(backEndPoint+'/users/register',_this.state.user);case 12:result=_context.sent;alert(\"Usuário registrado com sucesso.\");localStorage.setItem('token',result.data);_this.props.history.push(\"/\");_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](8);alert('Usuário ou email já utilizado.');console.log(_context.t0);case 22:_this.setState({user:blankUser});case 23:case\"end\":return _context.stop();}}},_callee,null,[[8,18]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(e){var newUser=_objectSpread({},_this.state.user);newUser[e.currentTarget.name]=e.currentTarget.value;_this.setState({user:newUser});};return _this;}_createClass(Register,[{key:\"validateUser\",value:function validateUser(user){var schema=Joi.object({userName:Joi.string().max(70).min(3).required(),password:Joi.string().max(70).min(3).required(),email:Joi.string().email({tlds:{allow:false}}).max(70).min(3).required()});return schema.validate(user);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"addTopicos\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tela de registro de usu\\xE1rio\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Entre com seus dados nos campos abaixo para se cadastrar\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"addForm\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userName\",children:\"Usu\\xE1rio\"}),/*#__PURE__*/_jsx(\"input\",{name:\"userName\",value:this.state.user.userName,onChange:this.handleChange,autoFocus:true,className:\"addInput\",type:\"text\",id:\"userName\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Senha\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:this.state.user.password,onChange:this.handleChange,className:\"addInput\",type:\"password\",id:\"password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:this.state.user.email,onChange:this.handleChange,className:\"addInput\",type:\"text\",id:\"email\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"addItem\",children:/*#__PURE__*/_jsx(\"input\",{className:\"submitBtn\",type:\"submit\",value:\"Salvar\"})})]})]});}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/src/components/register.jsx"],"names":["React","Component","axios","Joi","Register","state","user","userName","email","password","handleSubmit","e","blankUser","preventDefault","valid","validateUser","error","alert","message","setState","backEndPoint","process","env","REACT_APP_API_URL","post","result","localStorage","setItem","data","props","history","push","console","log","handleChange","newUser","currentTarget","name","value","schema","object","string","max","min","required","tlds","allow","validate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../static/css/addMaterias.css';\nimport axios from 'axios';\nimport Joi from 'joi';\n\n//TODO: Verificar duplicidade de usuários e e-mails no front.\n\nclass Register extends Component {\n    state = {  \n        user : {\n            userName: '',\n            email: '',\n            password:''\n        }\n    }\n\n    validateUser(user){\n        const schema = Joi.object({\n            userName: Joi.string().max(70).min(3).required(),\n            password: Joi.string().max(70).min(3).required(),\n            email:  Joi.string().email({ tlds: { allow: false } }).max(70).min(3).required()\n        });\n    \n        return schema.validate(user);\n    }\n\n    handleSubmit = async e => {\n\n        const blankUser = {\n            userName : '',\n            email : '',\n            password : ''\n        };\n\n        e.preventDefault();\n       \n        const valid = this.validateUser(this.state.user);\n\n       \n        if(valid.error){\n            alert(valid.error.message);\n            this.setState({user:blankUser});\n        }\n    \n        else{\n        try{\n\n            const backEndPoint = process.env.REACT_APP_API_URL;\n            const result  = await axios.post(backEndPoint+'/users/register', this.state.user);\n            alert(\"Usuário registrado com sucesso.\");\n            localStorage.setItem('token', result.data);\n            this.props.history.push(\"/\");\n           \n        }\n        catch(e){\n            alert('Usuário ou email já utilizado.');\n            console.log(e);\n        }\n        \n        this.setState({user:blankUser});\n\n        }\n\n        \n        \n    }\n\n    handleChange = e => {\n        const newUser = {...this.state.user};\n\n        newUser[e.currentTarget.name] = e.currentTarget.value;\n\n        this.setState({user:newUser});\n    }\n\n    render() { \n        return ( \n\n            <div className = \"addTopicos\">\n                <h2>Tela de registro de usuário</h2>\n                <h3>Entre com seus dados nos campos abaixo para se cadastrar</h3>\n                <form className = \"addForm\" onSubmit ={this.handleSubmit}>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"userName\">Usuário</label>\n                        <input name = 'userName'  value = {this.state.user.userName} onChange = {this.handleChange} autoFocus className = \"addInput\" type=\"text\" id=\"userName\" />\n                    </div>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"password\">Senha</label>\n                        <input name = 'password' value = {this.state.user.password}  onChange = {this.handleChange} className = \"addInput\"  type=\"password\" id=\"password\" />\n                    </div>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"email\">E-mail</label>\n                        <input name = 'email' value = {this.state.user.email}  onChange = {this.handleChange} className = \"addInput\"  type=\"text\" id=\"email\" />\n                    </div>\n                    <div className=\"addItem\">\n                        <input className = \"submitBtn\" type=\"submit\" value=\"Salvar\"/>\n                    </div>\n                </form>\n            </div>\n\n         );\n    }\n}\n \nexport default Register;"]},"metadata":{},"sourceType":"module"}