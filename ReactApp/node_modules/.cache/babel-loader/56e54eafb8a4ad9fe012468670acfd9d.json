{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'../static/css/addMaterias.css';import axios from'axios';import Joi from'joi';import jwtDecode from'jwt-decode';var AddTopicos=/*#__PURE__*/function(_Component){_inherits(AddTopicos,_Component);var _super=_createSuper(AddTopicos);function AddTopicos(){var _this;_classCallCheck(this,AddTopicos);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={form:{materia:'',assunto:'',topico:'',preReqs:[]}};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var backEndPoint,valid,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:backEndPoint=process.env.REACT_APP_API_URL;e.preventDefault();valid=_this.validateEnter(_this.state.form);if(!valid.error){_context.next=7;break;}alert(valid.error.message);_context.next=17;break;case 7:_context.prev=7;_context.next=10;return axios.post(backEndPoint+'/topicos/add',_this.state.form,{headers:{'x-auth-token':localStorage.getItem('token')}});case 10:result=_context.sent;alert(\"Tópico adicionado com sucesso.\");_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](7);alert(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[7,14]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(e){var newForm=_objectSpread({},_this.state.form);if(e.currentTarget.name==='preReqs'){var list=e.currentTarget.value.split(',');newForm[e.currentTarget.name]=list;}else{newForm[e.currentTarget.name]=e.currentTarget.value;}_this.setState({form:newForm});};return _this;}_createClass(AddTopicos,[{key:\"componentDidMount\",value:function componentDidMount(){var token=localStorage.getItem('token');var user=jwtDecode(token);if(!user.isAdmin){alert('Você não tem permissão para acessar esta página.');this.props.history.push(\"/\");}}},{key:\"validateEnter\",value:function validateEnter(topico){var schema=Joi.object({materia:Joi.string().max(70).min(3).required(),assunto:Joi.string().max(70).min(3).required(),topico:Joi.string().max(70).min(3).required(),preReqs:Joi.array().required()});return schema.validate(topico);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"addTopicos\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tela de adi\\xE7\\xE3o de t\\xF3picos\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"addForm\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"materia\",children:\"Materia\"}),/*#__PURE__*/_jsx(\"input\",{name:\"materia\",value:this.state.form.materia,onChange:this.handleChange,autoFocus:true,className:\"addInput\",type:\"text\",id:\"materia\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"assunto\",children:\"Assunto\"}),/*#__PURE__*/_jsx(\"input\",{name:\"assunto\",value:this.state.form.assunto,onChange:this.handleChange,autoFocus:true,className:\"addInput\",type:\"text\",id:\"assunto\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"topico\",children:\"T\\xF3pico\"}),/*#__PURE__*/_jsx(\"input\",{name:\"topico\",value:this.state.form.topico,onChange:this.handleChange,className:\"addInput\",type:\"text\",id:\"topico\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"addItem\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"preReq\",children:\"Pr\\xE9-Requisitos\"}),/*#__PURE__*/_jsx(\"input\",{name:\"preReqs\",value:this.state.form.preReqs,onChange:this.handleChange,autoFocus:true,className:\"addInput\",type:\"text\",id:\"preReq\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"addItem\",children:/*#__PURE__*/_jsx(\"input\",{className:\"submitBtn\",type:\"submit\",value:\"Salvar\"})})]})]});}}]);return AddTopicos;}(Component);export default AddTopicos;","map":{"version":3,"sources":["/home/gatofeles/Documentos/oiLuigi/oiLuigiNode/frontend/luigi/src/components/addTopicos.jsx"],"names":["React","Component","axios","Joi","jwtDecode","AddTopicos","state","form","materia","assunto","topico","preReqs","handleSubmit","e","backEndPoint","process","env","REACT_APP_API_URL","preventDefault","valid","validateEnter","error","alert","message","post","headers","localStorage","getItem","result","handleChange","newForm","currentTarget","name","list","value","split","setState","token","user","isAdmin","props","history","push","schema","object","string","max","min","required","array","validate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../static/css/addMaterias.css';\nimport axios from 'axios';\nimport Joi from 'joi';\nimport jwtDecode from 'jwt-decode';\n\nclass AddTopicos extends Component {\n\n    state = {\n        form : {\n            materia:'',\n            assunto:'',\n            topico:'',\n            preReqs:[]\n        }\n    }\n\n    componentDidMount() {\n\n        const token = localStorage.getItem('token');\n        const user = jwtDecode(token);\n        if(!user.isAdmin){\n            alert('Você não tem permissão para acessar esta página.');\n            this.props.history.push(\"/\");\n        }\n    }\n\n    validateEnter(topico){\n\n        const schema = Joi.object({\n            materia: Joi.string().max(70).min(3).required(),\n            assunto: Joi.string().max(70).min(3).required(),\n            topico:  Joi.string().max(70).min(3).required(),\n            preReqs:Joi.array().required()\n        });\n    \n        return schema.validate(topico);\n    }\n\n    handleSubmit = async e => {\n        const backEndPoint = process.env.REACT_APP_API_URL;\n\n        e.preventDefault();\n\n        const valid = this.validateEnter(this.state.form);\n        if(valid.error){\n            alert(valid.error.message);\n        }\n        else{\n            try{\n                const result  = await axios.post(backEndPoint+'/topicos/add', this.state.form, {\n                headers:{\n                    'x-auth-token': localStorage.getItem('token')\n                }\n            });\n            alert(\"Tópico adicionado com sucesso.\");\n            }\n            catch(ex){\n\n                alert(ex);\n\n            }\n        }\n        \n    }\n\n    handleChange = e => {\n        const newForm = {...this.state.form};\n\n        if(e.currentTarget.name === 'preReqs'){\n            let list = e.currentTarget.value.split(',');\n            newForm[e.currentTarget.name] = list;\n        }\n\n        else{\n            newForm[e.currentTarget.name] = e.currentTarget.value;\n        }\n\n        this.setState({form:newForm});\n    }\n\n    \n    render() { \n        return ( \n            <div className = \"addTopicos\">\n                <h2>Tela de adição de tópicos</h2>\n                <form className = \"addForm\" onSubmit ={this.handleSubmit}>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"materia\">Materia</label>\n                        <input name = 'materia'  value = {this.state.form.materia} onChange = {this.handleChange} autoFocus className = \"addInput\" type=\"text\" id=\"materia\" />\n                    </div>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"assunto\">Assunto</label>\n                        <input name = 'assunto' value = {this.state.form.assunto}  onChange = {this.handleChange} autoFocus className = \"addInput\"  type=\"text\" id=\"assunto\" />\n                    </div>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"topico\">Tópico</label>\n                        <input name = 'topico' value = {this.state.form.topico}  onChange = {this.handleChange} className = \"addInput\"  type=\"text\" id=\"topico\" />\n                    </div>\n                    <div className=\"addItem\">\n                        <label htmlFor=\"preReq\">Pré-Requisitos</label>\n                        <input name = 'preReqs' value = {this.state.form.preReqs}  onChange = {this.handleChange} autoFocus className = \"addInput\"  type=\"text\" id=\"preReq\"/>\n                    </div>\n                    <div className=\"addItem\">\n                        <input className = \"submitBtn\" type=\"submit\" value=\"Salvar\"/>\n                    </div>\n                </form>\n            </div>\n         );\n    }\n}\n \nexport default AddTopicos;"]},"metadata":{},"sourceType":"module"}